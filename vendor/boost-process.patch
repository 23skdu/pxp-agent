From a7340a9df64adf330659f4791f7cc3622e732230 Mon Sep 17 00:00:00 2001
From: Michael Smith <michael.smith@puppetlabs.com>
Date: Fri, 11 Sep 2015 15:07:54 -0700
Subject: [PATCH] hacks

---
 boost/process/detail/pipe.hpp | 2 +-
 boost/process/self.hpp        | 3 +++
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/boost/process/detail/pipe.hpp b/boost/process/detail/pipe.hpp
index a33595e..e1857a6 100644
--- a/boost/process/detail/pipe.hpp
+++ b/boost/process/detail/pipe.hpp
@@ -126,7 +126,7 @@ public:
         ::CloseHandle(overlapped.hEvent); 
 #  else 
         if (!::CreatePipe(&hs[0], &hs[1], &sa, 0)) 
-            boost::throw_exception(boost::system::system_error(::GetLastError(), boost::system::system_category, "boost::process::detail::pipe::pipe: CreatePipe failed")); 
+            boost::throw_exception(boost::system::system_error(::GetLastError(), boost::system::get_system_category(), "boost::process::detail::pipe::pipe: CreatePipe failed")); 
 #  endif 
 #endif 
 
diff --git a/boost/process/self.hpp b/boost/process/self.hpp
index 79828ca..5de8886 100644
--- a/boost/process/self.hpp
+++ b/boost/process/self.hpp
@@ -87,6 +87,9 @@ public:
 #ifdef GetEnvironmentStrings 
 #undef GetEnvironmentStrings 
 #endif 
+#ifdef environ
+#undef environ
+#endif
         char *environ = ::GetEnvironmentStrings(); 
         if (!environ) 
             boost::throw_exception(boost::system::system_error(boost::system::error_code(::GetLastError(), boost::system::get_system_category()), "boost::process::self::get_environment: GetEnvironmentStrings failed")); 
-- 
1.9.5.msysgit.1

